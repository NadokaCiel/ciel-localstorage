{"version":3,"file":"ciel-localstorage.esm.js","sources":["../src/lib/index.js","../src/entry/index.js"],"sourcesContent":["import SHA1 from 'crypto-js/sha1';\n\nimport Base64 from 'crypto-js/enc-base64';\n\nconst sha1 = (string) => SHA1(string).toString();\n\nexport function setLocalStorage(key, value, expired) {\n  if (!value && value !== 0) {\n    return '';\n  }\n  window.localStorage.setItem(sha1(key), Base64.stringify(JSON.stringify(value)));\n  if (expired && Number.isInteger(expired)) {\n    window.localStorage.setItem(sha1(`${key}__expires__`), Base64.stringify(Date.now() + 1000 * expired));\n  }\n  return value;\n}\n\nexport function getLocalStorage(key) {\n  const expired = Base64.parse(window.localStorage.getItem(sha1(`${key}__expires__`)));\n  const now = Date.now();\n\n  if (expired && now >= parseInt(expired, 10)) {\n    removeLocalStorage(sha1(key));\n    return '';\n  }\n  const value = Base64.parse(window.localStorage.getItem(sha1(key)));\n  return value ? JSON.parse(value) : null;\n}\n\nexport function removeLocalStorage(key) {\n  window.localStorage.removeItem(sha1(key));\n  window.localStorage.removeItem(sha1(`${key}__expires__`));\n}","import {\n  setLocalStorage,\n  getLocalStorage,\n  removeLocalStorage\n} from '../lib/index';\n\nexport default {\n  set: setLocalStorage,\n  get: getLocalStorage,\n  remove: removeLocalStorage\n};"],"names":["sha1","string","SHA1","toString","setLocalStorage","key","value","expired","window","localStorage","setItem","Base64","stringify","getLocalStorage","parse","getItem","now","removeLocalStorage","JSON","removeItem","set","get","remove"],"mappings":";;;;;;;AAIA,IAAMA,IAAI,CAAG,SAACC,MAAD,SAAYC,IAAI,CAACD,MAAD,CAAJ,CAAaE,QAAb,EAAZ,CAAb,CAEA,SAAgBC,eAAT,CAAyBC,GAAzB,CAA8BC,KAA9B,CAAqCC,OAArC,CAA8C,QAC9CD,KAAD,EAAoB,CAAV,GAAAA,KADqC,EAInDE,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BV,IAAI,CAACK,GAAD,CAAhC,CAAuCM,MAAM,CAACC,SAAP,CAAiB,gBAAeN,KAAf,CAAjB,CAAvC,CAJmD,CAK/CC,OAAO,EAAI,kBAAiBA,OAAjB,CALoC,EAMjDC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BV,IAAI,WAAIK,GAAJ,gBAAhC,CAAuDM,MAAM,CAACC,SAAP,CAAiB,YAAa,IAAOL,OAArC,CAAvD,CANiD,CAQ5CD,KAR4C,EAE1C,EAOV,CAED,SAAgBO,eAAT,CAAyBR,GAAzB,CAA8B,KAC7BE,OAAO,CAAGI,MAAM,CAACG,KAAP,CAAaN,MAAM,CAACC,YAAP,CAAoBM,OAApB,CAA4Bf,IAAI,WAAIK,GAAJ,gBAAhC,CAAb,CADmB,CAE7BW,GAAG,CAAG,WAFuB,CAInC,GAAIT,OAAO,EAAIS,GAAG,EAAI,UAAST,OAAT,CAAkB,EAAlB,CAAtB,CAEE,OADAU,kBAAkB,CAACjB,IAAI,CAACK,GAAD,CAAL,CAClB,CAAO,EAAP,CAEF,IAAMC,KAAK,CAAGK,MAAM,CAACG,KAAP,CAAaN,MAAM,CAACC,YAAP,CAAoBM,OAApB,CAA4Bf,IAAI,CAACK,GAAD,CAAhC,CAAb,CAAd,CACA,OAAOC,KAAK,CAAGY,IAAI,CAACJ,KAAL,CAAWR,KAAX,CAAH,CAAuB,IACpC,CAED,SAAgBW,kBAAT,CAA4BZ,GAA5B,CAAiC,CACtCG,MAAM,CAACC,YAAP,CAAoBU,UAApB,CAA+BnB,IAAI,CAACK,GAAD,CAAnC,CADsC,CAEtCG,MAAM,CAACC,YAAP,CAAoBU,UAApB,CAA+BnB,IAAI,WAAIK,GAAJ,gBAAnC,EACD;;AC1BD,YAAe,CACbe,GAAG,CAAEhB,eADQ,CAEbiB,GAAG,CAAER,eAFQ,CAGbS,MAAM,CAAEL,kBAHK,CAAf;;;;"}