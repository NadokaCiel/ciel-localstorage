{"version":3,"file":"ciel-localstorage.common.js","sources":["../src/lib/index.js","../src/entry/index.js"],"sourcesContent":["import SHA1 from 'crypto-js/sha1';\n\nimport Base64 from 'crypto-js/enc-base64';\n\nconst sha1 = (string) => SHA1(string).toString();\n\nexport function setLocalStorage(key, value, expired) {\n  if (!value && value !== 0) {\n    return '';\n  }\n  window.localStorage.setItem(sha1(key), Base64.stringify(JSON.stringify(value)));\n  if (expired && Number.isInteger(expired)) {\n    window.localStorage.setItem(sha1(`${key}__expires__`), Base64.stringify(Date.now() + 1000 * expired));\n  }\n  return value;\n}\n\nexport function getLocalStorage(key) {\n  const expired = Base64.parse(window.localStorage.getItem(sha1(`${key}__expires__`)));\n  const now = Date.now();\n\n  if (expired && now >= parseInt(expired, 10)) {\n    removeLocalStorage(sha1(key));\n    return '';\n  }\n  const value = Base64.parse(window.localStorage.getItem(sha1(key)));\n  return value ? JSON.parse(value) : null;\n}\n\nexport function removeLocalStorage(key) {\n  window.localStorage.removeItem(sha1(key));\n  window.localStorage.removeItem(sha1(`${key}__expires__`));\n}","import {\n  setLocalStorage,\n  getLocalStorage,\n  removeLocalStorage\n} from '../lib/index';\n\nexport default {\n  set: setLocalStorage,\n  get: getLocalStorage,\n  remove: removeLocalStorage\n};"],"names":["sha1","string","SHA1","toString","removeLocalStorage","key","window","localStorage","removeItem","set","value","expired","setItem","Base64","stringify","_JSON$stringify","_Number$isInteger","_Date$now","get","parse","getItem","now","_parseInt","JSON","remove"],"mappings":"kpCAIA,IAAMA,EAAO,SAACC,UAAWC,EAAKD,GAAQE,qBAyBtBC,EAAmBC,GACjCC,OAAOC,aAAaC,WAAWR,EAAKK,IACpCC,OAAOC,aAAaC,WAAWR,YAAQK,yBCzB1B,CACbI,aDD8BJ,EAAKK,EAAOC,UACrCD,GAAmB,IAAVA,GAGdJ,OAAOC,aAAaK,QAAQZ,EAAKK,GAAMQ,EAAOC,UAAUC,EAAeL,KACnEC,GAAWK,EAAiBL,IAC9BL,OAAOC,aAAaK,QAAQZ,YAAQK,kBAAmBQ,EAAOC,UAAUG,IAAa,IAAON,IAEvFD,GANE,ICATQ,aDS8Bb,OACxBM,EAAUE,EAAOM,MAAMb,OAAOC,aAAaa,QAAQpB,YAAQK,oBAC3DgB,EAAMJ,IAEZ,GAAIN,GAAWU,GAAOC,EAASX,EAAS,IAEtC,OADAP,EAAmBJ,EAAKK,IACjB,GAET,IAAMK,EAAQG,EAAOM,MAAMb,OAAOC,aAAaa,QAAQpB,EAAKK,KAC5D,OAAOK,EAAQa,KAAKJ,MAAMT,GAAS,MCjBnCc,OAAQpB"}